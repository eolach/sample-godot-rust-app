name: Sandbox

# Uncomment if the workflow should be triggered by whatever push
on: push

# Uncomment all these lines if the workflow should be triggered only for source code changes
# on:
#   push:
#     paths:
#     - 'dockerfiles/**'
#     - 'assets/**'
#     - 'scenes/**'
#     - 'src/**'
#     - 'project.godot'
#     - 'default_env.tres'
#     - 'Cargo.toml'
#     - 'export_presets.cfg'

jobs:
  godot-android-sandbox:
    runs-on: ubuntu-latest
    name: Trying to setup Godot Engine to support Android exports
    steps:
    - uses: actions/checkout@v2
    - name: Trying to locate jarsigner
      run: ls $JAVA_HOME/bin
    - name: Trying to locate adb
      run: ls $ANDROID_HOME/platform-tools
    - name: Trying to locate debug.keystore
      run: |
        keytool -genkey -v -keystore debug.keystore -storepass android -alias androiddebugkey -keypass android -keyalg RSA -keysize 2048 -validity 10000 -dname "C=US, O=Android, CN=Android Debug"
        ls
    - name: Setup environment
      run: |
        wget https://downloads.tuxfamily.org/godotengine/3.2.1/Godot_v3.2.1-stable_linux_headless.64.zip
        wget https://downloads.tuxfamily.org/godotengine/3.2.1/Godot_v3.2.1-stable_export_templates.tpz
        mkdir ~/.cache
        mkdir -p ~/.config/godot
        mkdir -p ~/.local/share/godot/templates/3.2.1.stable
        unzip Godot_v3.2.1-stable_linux_headless.64.zip
        sudo mv Godot_v3.2.1-stable_linux_headless.64 /usr/local/bin/godot
        unzip Godot_v3.2.1-stable_export_templates.tpz
        sudo mv templates/* ~/.local/share/godot/templates/3.2.1.stable
        sudo rm -f Godot_v3.2.1-stable_linux_headless.64.zip Godot_v3.2.1-stable_export_templates.tpz
        mkdir -p ./build/android
    - name: Trying to locate editor settings
      run: ls ~/.config
    - name: Trying to locate editor settings deeper
      run: ls ~/.config/godot
    - name: Read editor settings
      run: cat ~/.config/godot/editor_settings-3.tres
        